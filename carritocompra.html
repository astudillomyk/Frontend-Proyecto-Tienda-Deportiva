<!DOCTYPE html>
<html lang="en">

<head>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="styles.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
</head>

<body>


    <nav class="navbar navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="landing.html"><img src="img/5.png" alt="" width="30" height="24"
                    class="d-inline-block align-text-top">Tienda</a>

            &nbsp;


            <div class='nav nav-item ms-auto'>
                <form class="d-flex ms-auto">
                    <input class="form-control me-2" type="search" placeholder="Ingrese su búsqueda..."
                        aria-label="Search">
                    <a class="btn btn-outline-dark" type="submit" href="lista.html">Buscar</a>
                </form>
                &nbsp;
                <form class="d-flex ms-auto">
                    <a id="loginBtn" class="btn btn btn-primary" type="submit" href="login.html">Login</a>

                </form>
                &nbsp;
                <form class="d-flex ms-auto">
                    <a id="registroBtn" class="btn btn btn-primary" type="submit" href="registro.html">Registro</a>

                </form>
                &nbsp;
                <form class="d-flex ms-auto">
                    <a id="perfilBtn" class="btn btn btn-primary" type="submit" href="vistausuario.html">Perfil</a>


                </form>
                &nbsp;
            </div>
            <div class='nav navbar-nav navbar'>
                <button type="button" class="btn btn-secondary" href="carritocompra.html">
                    <i class="bi-basket"></i>
                </button>
            </div>
            &nbsp;



            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Categorias</h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                        aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">



                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="search-hombre.html">Hombre</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="search-mujer.html">Mujer</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Niño</a>
                        </li>


                    </ul>

                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1>Carrito de Compras</h1>

        <div id="cartItemsContainer"></div>

        <div id="checkoutButtonContainer"></div>
        <div id="emptyCartMessage" style="display: none;">No tienes ningún producto en el carrito.</div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const productName = urlParams.get('name');
        const productPrice = urlParams.get('price');
        const productImage = urlParams.get('image');

        const cartItemsContainer = document.getElementById('cartItemsContainer');
        const checkoutButtonContainer = document.getElementById('checkoutButtonContainer');
        const emptyCartMessage = document.getElementById('emptyCartMessage');

        const productElement = document.createElement('div');
        productElement.className = 'card';
        productElement.style = 'width: 18rem;';

        productElement.innerHTML = `
      <img src="${productImage}" class="card-img-top" alt="${productName}">
      <div class="card-body">
        <h5 class="card-title">${productName}</h5>
        <p class="card-text">Precio: $${productPrice}</p>
        <button class="btn btn-danger" onclick="removeItem()">Eliminar</button>
      </div>
    `;

        cartItemsContainer.appendChild(productElement);

        function removeItem() {
            productElement.remove();


            const cartItems = cartItemsContainer.getElementsByClassName('card');
            if (cartItems.length === 0) {
                checkoutButtonContainer.innerHTML = '';
                emptyCartMessage.style.display = 'block';
            }
        }


        const cartItems = cartItemsContainer.getElementsByClassName('card');
        if (cartItems.length === 0) {
            checkoutButtonContainer.innerHTML = '';
            emptyCartMessage.style.display = 'block';
        } else {
            const checkoutButton = document.createElement('button');
            checkoutButton.className = 'btn btn-primary mt-3';
            checkoutButton.innerHTML = 'Comprar';
            checkoutButton.onclick = buyItems;

            checkoutButtonContainer.appendChild(checkoutButton);
        }

        function buyItems() {
            alert('¡Gracias por tu compra!');
        }
    </script>

    <script>
        var loggedIn = localStorage.getItem('loggedIn');

        if (loggedIn) {

            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('registroBtn').style.display = 'none';
        } else {

            document.getElementById('perfilBtn').style.display = 'none';
        }
    </script>

    <style>
        .container {
            left: 10px;

        }
    </style>

</body>

</html>